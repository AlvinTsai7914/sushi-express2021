<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="icon" type="image/png" sizes="16x16" href="img/scene_5_sushi.svg" />
        <link rel="stylesheet" href="css/style.css" />
        <link rel="stylesheet" href="/fontawesome/css/all.css" />

        <title>版型</title>
    </head>
    <body>
        <!-- warpper 開始 -->
        <div class="wrapper">
            <!-- container 開始 -->
            <div class="container">
                <div class="intro_scene d-none">
                    <div class="main">
                        <!-- 對話框 -->
                        <div class="chat_bubble first">
                            <p class="chat">我是名偵探 鮪魚俠</p>
                            <i class="fas fa-caret-down fa-lg"></i>
                        </div>
                        <div class="chat_bubble second d-none">
                            <p class="chat">有一個任務
                                需要你協助我完成</p>
                        </div>
                        <div class="man">
                            <div class="magnifier">
                                <div class="spark_box">
                                    <img class="spark" src="./img/scene_1_spark.svg" alt="" />
                                    <img class="spark_small" src="./img/scene_1_spark.svg" alt="" />
                                </div>
                                <div class="glass_border">
                                    <div class="glass">
                                        <img class="flash" src="./img/scene_1_flash.svg" alt="" />
                                    </div>
                                </div>
                            </div>
                            <img class="post_rising d-none" src="img/scene_1_post.svg" alt="" />
                        </div>
                        <div class="btn_box d-none">
                            <div class="pointer"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- warpper 結束 -->

        <!-- loading -->
        <div class="loading_scene">
            <div class="loading_front">
                <div class="black_bg left"></div>
                <div class="black_bg right"></div>
                <div class="loading_wrapper">
                    <img src="img/loading.svg" alt="" />
                    <p>Loading...</p>
                    <div class="loading_bar">
                        <div class="loading_inner"></div>
                    </div>
                </div>
            </div>
            <!-- <div class="loading_back">
                        <div class="flash_wrapper">
                            <div class="magnifier">
                                <div class="spark_box">
                                    <img class="spark" src="./img/scene_1_spark.svg" alt="" />
                                    <img class="spark_small" src="./img/scene_1_spark.svg" alt="" />
                                </div>
                                <div class="glass_border">
                                    <div class="glass">
                                        <img class="flash" src="./img/scene_1_flash.svg" alt="" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div> -->
        </div>

        <!-- 接取任務 --> 
        <div class="post_wrapper d-none">
            <div class="post">
                <img class="content" src="img/scene_1_post_content.svg" alt="" />
                    <div class="pointer"></div>
           
            </div>
        </div>

        <audio data-name="click" src="audio/click.mp3" alt=""></audio>
        <audio data-name="mission" src="audio/misson.mp3" alt=""></audio>
        <audio data-name="fish_jump" src="audio/fish_jump.mp3" alt=""></audio>
        <audio data-name="prize" src="audio/prize.mp3" alt=""></audio>
        <audio data-name="BGM-suspense" src="audio/BGM-suspense.mp3" alt=""></audio>
        <audio data-name="BGM-speed" src="audio/BGM-speed.mp3" alt=""></audio>
        <audio data-name="BGM-happy" src="audio/BGM-happy.mp3" alt=""></audio>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script src="js/common.js"></script>
        <script>
            function playAudio(dataName) {
                let audio = $(`audio[data-name="${dataName}"]`);
                $(audio).trigger("play");
            }
            function pauseAudio(dataName) {
                let audio = $(`audio[data-name="${dataName}"]`);
                $(audio).trigger("pause");
            }
            // loading > intro
            $(function () {
                // 設定高度為瀏覽器內高
                let winInnerHeight = $(window).innerHeight();
                console.log(winInnerHeight);
                $(".wrapper").css({ height: winInnerHeight });

                // 遊戲開始10秒後loading_scene消失
                setTimeout(() => {
                    $(".loading_scene").addClass("d-none");
                }, 9500);

                setTimeout(() => {
                    $(".intro_scene").removeClass("d-none");
                    playAudio("BGM-suspense");
                }, 4000);
            });

            // 第一個對話框 > 任務顯示
            $(function () {
                $(".intro_scene").one("click", function () {
                    $(".chat_bubble.first").addClass("d-none");
                    $(".chat_bubble.second.d-none").removeClass("d-none");
                    $(".post_rising").removeClass("d-none");
                    setTimeout(() => {
                        $(".btn_box").removeClass("d-none");
                    }, 1500);
                    playAudio("mission");
                });

                $(".btn_box").on("click", function () {
                    $(".post_wrapper").removeClass("d-none")
                    playAudio("click");
                });
            });
        </script>
    </body>
</html>
